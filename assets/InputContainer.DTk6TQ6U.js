import{b as h,u as p,j as o,a as v,D as I,R as N}from"./GlobalContext.C7fI4Rc3.js";/* empty css                     */import{r as g}from"./index.DhYZZe0J.js";function x(){const l=t=>{let s=0;return t.forEach(r=>{s+=Number(r.Note)}),s/t.length};return{Normal:l,Ponderado:t=>{let s=0,r=100,i=t.length;if(t.some(e=>e.per))t.forEach(e=>{e.per&&(r-=Number(e.per),i--)}),t.forEach(e=>{let a=Number(e.Note),f=Number(e.per?e.per:r/t.length+1)/100;e.per?s+=a*f:s=s});else return r=r/i,s=l(t),{Result:s,array:t,NoPer:r};return r!==100&&(r=r/i),{Result:s,NoPer:r,array:t}},Inline:t=>{if(t.Note&&t.per)return Number(t.Note)*(Number(t.per)/100)}}}const d=h([{Note:"",id:1,per:""},{Note:"",id:2,per:""},{Note:"",id:3,per:""},{Note:"",id:4,per:""}]),m=h(25);function L({text:l="Nota",save:c,Local:u=null,CalculateLocal:t}){const{MaxNote:s,Decimal:r}={MaxNote:p(v),Decimal:p(I)};p(d),p(N);const i=x(),n=e=>{if(s===null)return;Number(e.target.value)>=s&&(e.target.value=s);const a=i.Ponderado(c());N.set(a.Result),t(e,a.array)};return o.jsxs("div",{className:"app-input-div br-6 f-row f-align-center relative",children:[o.jsx("input",{className:"app-input-input br-6",placeholder:l,onChange:n,maxLength:r?7:4,tabIndex:0,use:"yes"}),o.jsx("span",{className:"app-input-local d-flex absolute f-center no-select","data-select":"local",children:u?u.toFixed(2):null})]})}function S({msg:l,Delete:c,save:u,CalculateLocal:t}){p(N),p(d);const s=p(m),r=x(),i=n=>{let e=0;n.target.value>=100&&(n.target.value=100),document.querySelectorAll(".app-input-per").forEach(f=>{e+=Number(f.value)}),l(e!==100?"No suman 100%":null);const a=r.Ponderado(u());N.set(a.Result),m.set(a.NoPer),t(n,a.array)};return o.jsxs("div",{className:"app-in-per-list f-row f-align-center",children:[o.jsx("input",{className:"app-input-per br-6 text-center",placeholder:s?`${Math.round(s)}%`:"0%",maxLength:3,tabIndex:-1,onChange:i}),o.jsx("span",{className:"app-in-close d-flex f-center",onClick:c,children:o.jsxs("svg",{className:"no-select",height:28,viewBox:"0 0 24 24",fill:"none",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10",strokeWidth:"1.5"}),o.jsx("path",{d:"M14.5 9.50002L9.5 14.5M9.49998 9.5L14.5 14.5",strokeWidth:"1.5",strokeLinecap:"round"})]})})]})}function y({data:l,SaveData:c,msg:u,Delete:t}){const s=x(),[r,i]=g.useState(null),n=(e,a)=>{const f=e.target.closest(".app-input-parent"),j=Number(f.getAttribute("inputid")),b=a.find(P=>P.id===j);i(s.Inline(b))};return o.jsxs("li",{className:"app-input-parent f-row f-justify-center g-15",inputid:l.id,children:[o.jsx(L,{text:l.Note?l.Note:`Nota ${l.id}`,save:c,Local:r,CalculateLocal:n}),o.jsx(S,{Delete:()=>t(l.id),msg:u,save:c,CalculateLocal:n})]})}function R(){const l=p(d);p(m);const[c,u]=g.useState(null),t=x(),s=()=>{let n=i();d.set([...l,{Note:"",id:l.reduce((e,a)=>Math.max(e,a.id),0)+1,per:""}]),m.set(100/(n.length+1)),N.set(t.Normal(n))},r=n=>{let e=l.filter(a=>a.id!==n);d.set(e),m.set(100/e.length),N.set(t.Normal(e))},i=()=>{let n=[];return document.querySelectorAll(".app-input-parent[inputid]").forEach(e=>{n=[...n,{Note:e.querySelector(".app-input-input").value,id:Number(e.getAttribute("inputid")),per:e.querySelector(".app-input-per").value}]}),d.set(n),n};return o.jsxs("ul",{className:"f-col g-15 f-center",children:[l&&l.map((n,e)=>o.jsx(y,{data:n,SaveData:i,msg:u,Delete:r},n.id)),o.jsxs("li",{className:"app-input-parent f-row f-justify-center g-15",children:[o.jsx("p",{className:"app-text-error app-input-div none f-row f-justify-end f-align-center",children:c||null}),o.jsxs("div",{className:"app-in-per-list f-row f-align-center",children:[o.jsx("span",{className:"pc-btn-black d-flex f-justify-center br-6",onClick:s,children:"Add"}),o.jsx("span",{className:"app-in-close none no-select"})]})]})]})}export{R as default};
